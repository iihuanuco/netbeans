<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>registro</title>
        <h:outputStylesheet library="css" name="style.css"  />
        <h:outputStylesheet library="resources" name="fonts.css"  />
        <h:outputScript library="js" name="bg.js"   />

    </h:head>
    <h:body style="background-color:white;">
        <h:form class="registro" >
            <div columns="1" class="registro-menu">
                <div class="submenu"><h:graphicImage class="imagen-reg" value="resources/img/1.jpg"/><p:commandButton value="Departamentos" onclick="#{departamentosBean.departamentos.mostrar()}" oncomplete="PF('departamentos').show();"  class="  btn-img"  /></div>
                <div class="submenu"><h:graphicImage class="imagen-reg" value="resources/img/2.jpg"/><p:commandButton value="Provincias" oncomplete="PF('provincias').show();"  class="  btn-img"  /></div>
                <div class="submenu"><h:graphicImage class="imagen-reg" value="resources/img/3r.jpg"/><p:commandButton value="Distritos" oncomplete="PF('distritos').show();" class="  btn-img"  /></div>
                <div class="submenu"><h:graphicImage class="imagen-reg" value="resources/img/4.jpg"/><p:commandButton value="Empresas" onclick="#{empresasBean.empresas.mostrar()}" oncomplete="PF('empresas').show();" class="  btn-img"  /></div>
                <div class="submenu"><h:graphicImage class="imagen-reg" value="resources/img/5.jpg"/><p:commandButton value="Sucursales" onclick="#{sucursalesBean.sucursales.mostrar3()}" oncomplete="PF('sucursales').show();"  class=" btn-img"  /></div>
                <div class="submenu"><h:graphicImage class="imagen-reg" value="resources/img/6.jpg"/><p:commandButton value="Asignar Usuario"  onclick="#{userxSucuBean.userxsucu.mostraruxs(sucursalesBean.sucursales.registrosuc)}" oncomplete="PF('sxu').show();"  class=" btn-img"  /></div>
            </div>


            <p:dialog  header="Registrar departamentos"  widgetVar="departamentos" rendered="true" height="400" width="500" modal="true" draggable="false" resizable="false" >
                <h:panelGrid columns="1" id="panel-departamento">
                    <p:inputText id="txtdepartamento"  placeholder="Departamento" value="#{departamentosBean.departamentos.nombredep}" class="texto" ></p:inputText>
                    <p:commandButton value="Guardar" actionListener="#{departamentosBean.registrar(login.user.registro)}" class="boton-ingresar" update="txtdepartamento" />
                   
                    <p:dataTable id="listadepartamentos" var="departamento"  value="#{departamentosBean.departamentos.lista}" filteredValue="#{departamentosBean.departamentos.listafiltrar}" rows="3" paginator="true" >
                        <p:column headerText="Registro" filterBy="#{departamento.registrodep}" >
                           <h:outputText value="#{departamento.registrodep} " rendered="#{departamento.flag}" />
                           <h:inputText value="#{departamento.registrodep}" rendered="#{ not departamento.flag}" />  
                        </p:column>
                        <p:column headerText="Departemento" filterBy="#{departamento.nombredep}">
                            <h:outputText value="#{departamento.nombredep} " rendered="#{departamento.flag}" />
                            <h:inputText value="#{departamento.nombredep}" rendered="#{ not departamento.flag}" />
                        </p:column>
                        <p:column headerText="accion">
                            <p:commandButton icon="ui-icon-close" actionListener="#{departamentosBean.departamentos.cancelar(departamento)}"  rendered="#{ not departamento.flag}" update="listadepartamentos" />
                            <p:commandButton icon="ui-icon-check" actionListener="#{departamentosBean.departamentos.actualizar(departamento,login.user.registro)}" rendered="#{ not departamento.flag}" update="listadepartamentos"/>
                            <p:commandButton icon="ui-icon-pencil" actionListener="#{departamentosBean.departamentos.editar(departamento)}"  rendered="#{departamento.flag}" update="listadepartamentos"/>
                        </p:column>
                    </p:dataTable>
                   
        </h:panelGrid>       
    </p:dialog>

    <p:dialog  header="Registrar provincias"  widgetVar="provincias" rendered="true" height="400" width="800" modal="true" draggable="false" resizable="false" >
        <h:panelGrid columns="1">
            <p:selectOneMenu id="cmbdepartamento" value="#{provinciasBean.provincias.departamento}"  > 
                <f:selectItem itemLabel="-Seleccione Departamento- "   itemValue="0"/>
                <f:selectItems value="#{departamentosBean.listaDepartamento}"/>
                <p:ajax listener="#{provinciasBean.provincias.mostrar(provinciasBean.provincias.departamento)}" process="cmbdepartamento" update="listaprovincias" />
            </p:selectOneMenu>
        </h:panelGrid>       
        <h:panelGrid columns="2">
            <p:inputText  id="txtprovincia" placeholder="Provincia" value="#{provinciasBean.provincias.nombrepro}" class="texto" ></p:inputText>
            <p:commandButton value="Guardar" actionListener="#{provinciasBean.registrar(login.user.registro)}" class="boton-ingresar" update="txtprovincia,listaprovincias"  />
        </h:panelGrid>  
        <h:panelGrid columns="1">
            <p:dataTable id="listaprovincias" var="provincia"  value="#{provinciasBean.provincias.lista}" filteredValue="#{provinciasBean.provincias.listafiltrar}" rows="3" paginator="true" >
                <p:column headerText="Registro" >
                    <p:outputLabel value="#{provincia.registropro}" rendered="#{provincia.flag}" />
                    <h:inputText value="#{provincia.registropro}" rendered="#{ not provincia.flag}" />
                </p:column>
                <p:column headerText="Provincia">
                    <p:outputLabel value="#{provincia.nombrepro}" rendered="#{provincia.flag}" />
                    <h:inputText value="#{provincia.nombrepro}" rendered="#{ not provincia.flag}" />
                </p:column>
                <p:column headerText="accion">
                    <p:commandButton icon="ui-icon-close" actionListener="#{provinciasBean.provincias.cancelar(provincia)}"  rendered="#{ not provincia.flag}" update="listaprovincias" />
                    <p:commandButton icon="ui-icon-check" actionListener="#{provinciasBean.provincias.actualizar(provincia,login.user.registro)}" rendered="#{ not provincia.flag}" update="listaprovincias"/>
                    <p:commandButton icon="ui-icon-pencil" actionListener="#{provinciasBean.provincias.editar(provincia)}"  rendered="#{provincia.flag}" update="listaprovincias"/>
                </p:column>
            </p:dataTable>
        </h:panelGrid>  
    </p:dialog>

    <p:dialog  header="Registrar distritos"  widgetVar="distritos" rendered="true" height="500" width="800" modal="true" draggable="false" resizable="false" >
        <h:panelGrid columns="1">
            <p:selectOneMenu id="cmbdepartamento2"  value="#{departamentosBean.departamentos.registrodep}" > 
                <f:selectItem itemLabel="-Seleccione Departamento- "   itemValue="0"/>
                <f:selectItems value="#{departamentosBean.listaDepartamento}"/>
                <p:ajax process="cmbdepartamento2" update="cmbprovincias" />
            </p:selectOneMenu>
            
            <p:selectOneMenu id="cmbprovincias"  value="#{distritosBean.distritos.provincia}" > 
                <f:selectItem itemLabel="-Seleccione Provincia- "   itemValue="0"/>
                <f:selectItems value="#{departamentosBean.listaProvincias}"/>
                <p:ajax listener="#{distritosBean.distritos.mostrar(distritosBean.distritos.provincia)}" process="cmbprovincias" update="listadistritos" />
            </p:selectOneMenu>
            
            <p:inputText id="txtdistrito"  placeholder="Distrito" value="#{distritosBean.distritos.nombredis}" class="texto" ></p:inputText>
            <p:inputText id="txtcapital"  placeholder="Capital" value="#{distritosBean.distritos.capitaldis}" class="texto" ></p:inputText>
            <p:commandButton value="Guardar" actionListener="#{distritosBean.registrar(login.user.registro)}"  class="boton-ingresar" update="txtdistrito,txtcapital" />
            
            <p:dataTable id="listadistritos" var="distritos"  value="#{distritosBean.distritos.lista}" filteredValue="#{distritosBean.distritos.listafiltrar}" rows="3" paginator="true" >
                <p:column headerText="Registro" filterBy="#{distritos.registrodis}" >
                    <p:outputLabel value="#{distritos.registrodis}" rendered="#{distritos.flag}" />
                    <h:inputText value="#{distritos.registrodis}" rendered="#{ not distritos.flag}" />
                </p:column>
                <p:column headerText="Distrito" filterBy="#{distritos.nombredis}">
                    <p:outputLabel value="#{distritos.nombredis}" rendered="#{distritos.flag}" />
                    <h:inputText value="#{distritos.nombredis}" rendered="#{ not distritos.flag}" />
                </p:column>
                <p:column headerText="Capital" filterBy="#{distritos.capitaldis}">
                    <p:outputLabel value="#{distritos.capitaldis}" rendered="#{distritos.flag}" />
                    <h:inputText value="#{distritos.capitaldis}" rendered="#{ not distritos.flag}" />
                </p:column>
                <p:column headerText="accion">
                    <p:commandButton icon="ui-icon-close" actionListener="#{distritosBean.distritos.cancelar(distritos)}"  rendered="#{ not distritos.flag}" update="listadistritos" />
                    <p:commandButton icon="ui-icon-check" actionListener="#{distritosBean.distritos.actualizar(distritos,login.user.registro)}" rendered="#{ not distritos.flag}" update="listadistritos"/>
                    <p:commandButton icon="ui-icon-pencil" actionListener="#{distritosBean.distritos.editar(distritos)}"  rendered="#{distritos.flag}" update="listadistritos"/>
                </p:column>
            </p:dataTable>
        </h:panelGrid>  
    </p:dialog>

    <p:dialog  header="Registrar empresas"  widgetVar="empresas" rendered="true" height="500" width="900" modal="true" draggable="false" resizable="false" >
        <h:panelGrid columns="1">
            <p:inputText  id="txtnombreemp" placeholder="RUC" value="#{empresasBean.empresas.rucemp}" class="texto" ></p:inputText>
            
            <p:inputText  id="txtrucemp" placeholder="Nombre" value="#{empresasBean.empresas.nombreemp}" class="texto" ></p:inputText>
            
            <p:commandButton value="Guardar" actionListener="#{empresasBean.registrar(login.user.registro)}" 
                              class="boton-ingresar"  update="txtnombreemp,txtrucemp,listaempresas"/>
            
            <p:dataTable id="listaempresas" var="empresas"  value="#{empresasBean.empresas.lista}" filteredValue="#{empresasBean.empresas.listafiltrar}" rows="3" paginator="true" >
                <p:column headerText="Registro" filterBy="#{empresas.registroemp}" >
                    <p:outputLabel value="#{empresas.registroemp}" rendered="#{empresas.flag}" />
                    <h:inputText value="#{empresas.registroemp}" rendered="#{ not empresas.flag}" />
                </p:column>
                <p:column headerText="RUC" filterBy="#{empresas.rucemp}">
                    <p:outputLabel value="#{empresas.rucemp}" rendered="#{empresas.flag}" />
                    <h:inputText value="#{empresas.rucemp}" rendered="#{ not empresas.flag}" />
                </p:column>
                <p:column headerText="Empresa" filterBy="#{empresas.nombreemp}">
                    <p:outputLabel value="#{empresas.nombreemp}" rendered="#{empresas.flag}" />
                    <h:inputText value="#{empresas.nombreemp}" rendered="#{ not empresas.flag}" />
                </p:column>
                <p:column headerText="accion">
                    <p:commandButton icon="ui-icon-close" actionListener="#{empresasBean.empresas.cancelar(empresas)}"  rendered="#{ not empresas.flag}" update="listaempresas" />
                    <p:commandButton icon="ui-icon-check" actionListener="#{empresasBean.empresas.actualizar(empresas,login.user.registro)}" rendered="#{ not empresas.flag}" update="listaempresas" />
                    <p:commandButton icon="ui-icon-pencil" actionListener="#{empresasBean.empresas.editar(empresas)}"  rendered="#{empresas.flag}" update="listaempresas" />
                </p:column>
            </p:dataTable>
        </h:panelGrid>  
        
    </p:dialog>

    <p:dialog  header="Registrar sucursales" widgetVar="sucursales" rendered="true" height="600" width="1300" modal="true" draggable="false" resizable="false" >
        <h:panelGrid  id="pnlsucursal" columns="4">
             <p:selectOneMenu id="cmbdepartamento3"  value="#{departamentosBean.departamentos.registrodep}" > 
                <f:selectItem itemLabel="-Seleccione Departamento- "   itemValue="0"/>
                <f:selectItems value="#{departamentosBean.listaDepartamento}"/>
                <p:ajax process="cmbdepartamento3" update="cmbprovincias2" />
            </p:selectOneMenu>
            
            <p:selectOneMenu id="cmbprovincias2"  value="#{distritosBean.distritos.provincia}" > 
                <f:selectItem itemLabel="-Seleccione Provincia- "   itemValue="0"/>
                <f:selectItems value="#{departamentosBean.listaProvincias}"/>
                <p:ajax process="cmbprovincias2" update="cmbdistrito" />
            </p:selectOneMenu>
            
            <p:selectOneMenu id="cmbdistrito" value="#{sucursalesBean.sucursales.distrito}"> 
                <f:selectItem itemLabel="-Seleccione Distrito- "   itemValue="0" itemDisabled="true"/>
                <f:selectItems value="#{distritosBean.listaDistritos}" />
            </p:selectOneMenu>
            <p:selectOneMenu value="#{sucursalesBean.sucursales.empresa}"> 
                <f:selectItem itemLabel="-Seleccione Empresa- "   itemValue="0" itemDisabled="true"/>
                <f:selectItems value="#{empresasBean.listaEmpresas}" />
            </p:selectOneMenu>
            <p:inputText  value="#{sucursalesBean.sucursales.nombresuc}" placeholder="Nombre" class="texto" ></p:inputText>
            <p:inputText  value="#{sucursalesBean.sucursales.direccionsuc}"  placeholder="Direccion" class="texto" ></p:inputText>
            <p:selectOneMenu value="#{sucursalesBean.sucursales.alcancesuc}">
                <f:selectItem itemLabel="-Seleccionar Alcance-" itemValue="0" itemDisabled="true" />
                <f:selectItem itemLabel="Instituto Pedagogico" itemValue="1" />
                <f:selectItem itemLabel="Instituto Tecnologico" itemValue="2" />
                <f:selectItem itemLabel="CEPRE" itemValue="3" />
            </p:selectOneMenu>           
            <p:inputText  value="#{sucursalesBean.sucursales.codigomodularsuc}" placeholder="Codigo Modular" class="texto" ></p:inputText>
            <p:inputText  value="#{sucursalesBean.sucursales.autorizacionsuc}" placeholder="Autorizacion" class="texto" ></p:inputText>
            <p:calendar value="#{sucursalesBean.sucursales.fechaautorizacionsuc}" pattern="dd/MM/yyyy" mask="true" class="datos" placeholder="Fecha de Autorizacion"  ><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></p:calendar>           
            <p:inputText  value="#{sucursalesBean.sucursales.revalidacionsuc}" placeholder="Revalidacion" class="texto" ></p:inputText>
            <p:selectOneMenu value="#{sucursalesBean.sucursales.tipodegestionsuc}">
                <f:selectItem itemLabel="-Seleccionar Tipo de Gestion-" itemValue="0" itemDisabled="true" />
                <f:selectItem itemLabel="Privada" itemValue="1" />
                <f:selectItem itemLabel="Publico" itemValue="2" />
                <f:selectItem itemLabel="Religioso" itemValue="3" />
            </p:selectOneMenu>            

            <p:commandButton value="Guardar" actionListener="#{sucursalesBean.registrar(login.user.registro)}" class="boton-ingresar" update="listasucursal,pnlsucursal" />
        </h:panelGrid>  
        
        <h:panelGrid columns="1">
            <p:dataTable id="listasucursal" var="sucursal"  value="#{sucursalesBean.sucursales.lista3}" filteredValue="#{sucursalesBean.sucursales.listafiltrar}" rows="3" paginator="true" >
                <p:column headerText="Sucursal" filterBy="#{sucursal.nombresuc}">
                    <p:outputLabel value="#{sucursal.nombresuc}" rendered="#{sucursal.flag}" />
                       <h:inputText value="#{sucursal.nombresuc}" rendered="#{ not sucursal.flag}" />
                </p:column>
                <p:column headerText="Direccion" filterBy="#{sucursal.direccionsuc}">
                    <p:outputLabel value="#{sucursal.direccionsuc}" rendered="#{sucursal.flag}" />
                        <h:inputText value="#{sucursal.direccionsuc}" rendered="#{ not sucursal.flag}" />
                </p:column>
                 <p:column headerText="Alcance" >
                     <p:selectOneMenu value="#{sucursal.alcancesuc}" disabled="#{sucursal.flag}" >
                <f:selectItem itemLabel="-Seleccionar Alcance-" itemValue="0" itemDisabled="true" />
                <f:selectItem itemLabel="Instituto Pedagogico" itemValue="1" />
                <f:selectItem itemLabel="Instituto Tecnologico" itemValue="2" />
                <f:selectItem itemLabel="CEPRE" itemValue="3" />
            </p:selectOneMenu> 
                </p:column>
                <p:column headerText="Codigo Modular" filterBy="#{sucursal.codigomodularsuc}">
                    <p:outputLabel value="#{sucursal.codigomodularsuc}" rendered="#{sucursal.flag}"/>
                    <h:inputText value="#{sucursal.codigomodularsuc}" rendered="#{ not sucursal.flag}" />
                </p:column>
                <p:column headerText="Tipo De Gestion" >
                    <p:selectOneMenu value="#{sucursal.tipodegestionsuc}"  disabled="#{sucursal.flag}" >
                <f:selectItem itemLabel="-Seleccionar Tipo de Gestion-" itemValue="0" itemDisabled="true" />
                <f:selectItem itemLabel="Privada" itemValue="1" />
                <f:selectItem itemLabel="Publico" itemValue="2" />
                <f:selectItem itemLabel="Religioso" itemValue="3" />
            </p:selectOneMenu>     
                </p:column>
                <p:column headerText="Autorizacion" filterBy="#{sucursal.autorizacionsuc}">
                    <p:outputLabel value="#{sucursal.autorizacionsuc}" rendered="#{sucursal.flag}" />
                    <h:inputText value="#{sucursal.autorizacionsuc}" rendered="#{ not sucursal.flag}" />
                </p:column>
                <p:column headerText="Fecha Autorizacion" filterBy="#{sucursal.fechaautorizacionsuc}">
                  <h:outputText value="#{sucursal.fechaautorizacionsuc}" rendered="#{sucursal.flag}" ><f:convertDateTime type="date" pattern="yyyy-MM-dd"/></h:outputText>
                                  <p:calendar id="txtfecha2" value="#{sucursal.fechaautorizacionsuc}" pattern="dd/MM/yyyy" mask="true" class="datos" placeholder="Fecha de Inicio" rendered="#{ not sucursal.flag}" ><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></p:calendar>
                     
                </p:column>
                <p:column headerText="Empresa" filterBy="#{sucursal.nempresa}">
                    <p:outputLabel value="#{sucursal.nempresa}" rendered="#{sucursal.flag}"  />
                    <p:selectOneMenu value="#{sucursal.empresa}" rendered="#{ not sucursal.flag}"> 
                <f:selectItem itemLabel="-Seleccione Empresa- "   itemValue="0" itemDisabled="true"/>
                <f:selectItems value="#{empresasBean.listaEmpresas}" />
            </p:selectOneMenu>
                    
                </p:column>
                <p:column headerText="Distrito" filterBy="#{sucursal.ndistrito}">
                    <p:outputLabel value="#{sucursal.ndistrito}" />
                </p:column>
                
                   <p:column headerText="accion">
                     <p:commandButton icon="ui-icon-close" actionListener="#{sucursalesBean.sucursales.cancelar(sucursal)}"  rendered="#{ not sucursal.flag}" update="listasucursal" />
                    <p:commandButton icon="ui-icon-check" actionListener="#{sucursalesBean.sucursales.actualizar(sucursal,login.user.registro)}" rendered="#{ not sucursal.flag}" update="listasucursal" />
                    <p:commandButton icon="ui-icon-pencil" actionListener="#{sucursalesBean.sucursales.editar(sucursal)}"  rendered="#{sucursal.flag}" update="listasucursal" />
                </p:column>
            </p:dataTable>
        </h:panelGrid>  
    </p:dialog>

    <p:dialog header="Registrar Usuario en Sucursal"  widgetVar="sxu" rendered="true" height="600" width="800" modal="true" draggable="false" resizable="false" >
        <h:panelGrid columns="2" id="userxSucu">
            
            <p:selectOneListbox value="#{userxSucuBean.userxsucu.usuario}" filter="true" filterMatchMode="contains" class="list-box">
                <f:selectItems value="#{usersBean.listausuarios}" itemLabel="#{usersBean.user.nombre}" />
            </p:selectOneListbox> 
            <p:commandButton value="Registrar" actionListener="#{userxSucuBean.registrar(login.user.registro,sucursalesBean.sucursales.registrosuc)}" class="boton-ingresar" update="userxSucu,listauxs" />
        </h:panelGrid>
        <h:panelGrid columns="1">
            <p:dataTable id="listauxs" var="uxs"  value="#{userxSucuBean.userxsucu.listauxs}" filteredValue="#{userxSucuBean.userxsucu.filtrouxs}" rows="5" paginator="true" >
                <p:column headerText="Usuario" filterBy="#{uxs.nusuario}" >
                    <p:outputLabel value="#{uxs.nusuario}" rendered="#{uxs.flag}" />
                    <p:selectOneListbox value="#{uxs.usuario}" filter="true" filterMatchMode="contains" class="list-box2" rendered="#{ not uxs.flag}"  >
                        <f:selectItems value="#{usersBean.listausuarios}" itemLabel="#{usersBean.user.nombre}" />
                    </p:selectOneListbox> 
                </p:column>
                <p:column headerText="Sucursal">
                    <p:outputLabel value="#{uxs.nsucursal}" rendered="#{uxs.flag}" />
               <p:selectOneMenu value="#{uxs.sucursal}" rendered="#{ not uxs.flag}" >
                <f:selectItem itemLabel="-Seleccione Sucursal- "   itemValue="0" itemDisabled="true"/>
                <f:selectItems value="#{sucursalesBean.listaSucursales}" />
            </p:selectOneMenu>
                </p:column>
 
                <p:column >
                    <p:commandButton icon="ui-icon-close" actionListener="#{userxSucuBean.userxsucu.cancelar(uxs)}"  rendered="#{ not uxs.flag}" update="listauxs" />
                    <p:commandButton icon="ui-icon-check" actionListener="#{userxSucuBean.userxsucu.actualizar(uxs,login.user.registro,sucursalesBean.sucursales.registrosuc)}" rendered="#{ not uxs.flag}" update="listauxs"/>
                    <p:commandButton icon="ui-icon-pencil" actionListener="#{userxSucuBean.userxsucu.editar(uxs)}"  rendered="#{uxs.flag}" update="listauxs"/>
                </p:column>
            </p:dataTable>
        </h:panelGrid>
    </p:dialog>
</h:form>
</h:body>
</html>
