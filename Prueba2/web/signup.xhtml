<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Registrar Usuario</title>
         <h:outputStylesheet library="css" name="style.css"  />
                <h:outputStylesheet name="fonts.css"  />
           <h:outputStylesheet library="css" name="submenu.css"  />
         <h:outputScript library="js" name="bg.js"   />
            <h:outputScript library="js" name="load.js"   />
            <h:outputStylesheet library="assets" name="animations.min.css"  />
        <h:outputScript library="assets" name="smoothscroll.min.js"   />
        <h:outputScript library="assets" name="appear.min.js"   />
        <h:outputScript library="assets" name="animations.min.js"   />
        <h:outputScript library="assets" name="backbone.js"   />
    </h:head>

    <h:body style="background-color:white;">
        <f:view>
            <h:form id="usuarios">
                
                <ul class="ca-menu">
                     <li class="animate-in"  data-anim-type="bounce-in-up" data-anim-delay="600">
                        <a>
                            <span> <i class="icon icon-user ca-icon"></i></span>
                            <div class="ca-content">
                                <h2 class="ca-main"><p:commandButton value="NUEVO USUARIO" 
              oncomplete="PF('usuarionuevo').show();"  class="btn-img"  /></h2>
                                <h3 class="ca-sub">Registra nuevos usuarios al sistema</h3>
                            </div>
                        </a>
                    </li>
                     <li class="animate-in"  data-anim-type="bounce-in-down" data-anim-delay="600">
                        <a >
                            <span  ><i class="icon icon-group ca-icon"></i></span>
                            <div class="ca-content">
                                <h2 class="ca-main"><p:commandButton value="ALUMNOS" 
              onclick="#{usersBean.user.mostraralumnos(sucursalesBean.sucursales.registrosuc)}" oncomplete="PF('alumno').show();"   class="btn-img"  /></h2>
                                <h3 class="ca-sub">Gestiona la informacion de los alumnos</h3>
                            </div>
                        </a>
                    </li>
                       <li class="animate-in"  data-anim-type="bounce-in-up" data-anim-delay="600">
                        <a >
                            <span  ><i class="icon icon-user3 ca-icon"></i></span>
                            <div class="ca-content">
                                <h2 class="ca-main"><p:commandButton value="DOCENTES" 
              onclick="#{usersBean.user.mostrardocente(sucursalesBean.sucursales.registrosuc)}" oncomplete="PF('docente').show();"  class="btn-img"   /></h2>
                                <h3 class="ca-sub">Gestiona la informacion de los docentes</h3>
                            </div>
                        </a>
                    </li>
                </ul>
                
                
          
                <div class="dialog-alumno"> 
            <p:dialog header="Registrar Usuario Nuevo" widgetVar="usuarionuevo" showEffect="clip" hideEffect="clip"   rendered="true" height="auto" width="100%" modal="true" draggable="false" resizable="false" position="absolute"  >
                <h:panelGrid columns="2" style="margin: 0 auto;" >
                 <p:outputLabel value="Usuario:  " class="label-app" />
                <p:inputText id="txtusuario" value="#{usersBean.user.usuario}"  class="texto"></p:inputText>
                  <p:outputLabel value="ContraseÃ±a:  " class="label-app" />
                <p:password id="password" value="#{usersBean.user.password}"   class="texto"></p:password>
                 <p:outputLabel value="DNI:  " class="label-app" />
                <p:inputText id="txtdni" value="#{usersBean.user.dni}" class="texto"></p:inputText>
                <p:outputLabel value="Nombre:  " class="label-app" />
                <p:inputText id="txtnombreu" value="#{usersBean.user.nombre}"   class="texto"></p:inputText>
                 <p:outputLabel value="Nivel:  " class="label-app" />
                <p:selectOneMenu id="cmdnivel"   value="#{usersBean.user.nivel}" >
                    <f:selectItem itemLabel="-Seleccionar Nivel-" itemValue="0" itemDisabled="true" />
                    <f:selectItem itemLabel="Administrador" itemValue="1" />
                    <f:selectItem itemLabel="Supervisor" itemValue="2" />
                    <f:selectItem itemLabel="Operador" itemValue="3" />
                    <f:selectItem itemLabel="Profesor" itemValue="4" />
                    <f:selectItem itemLabel="Alumno" itemValue="5" />
                    <f:selectItem itemLabel="Padre de Familia" itemValue="6" />
                    <f:selectItem itemLabel="Supervisor Externo" itemValue="7" />
                </p:selectOneMenu>
                <p:outputLabel for="sexo" value="Sexo: "  class="label-app" />
                <p:selectOneRadio id="sexo" value="#{usersBean.user.sexo}">
                    <f:selectItem itemLabel="Masculino" itemValue="1" />
                    <f:selectItem itemLabel="Femenino" itemValue="2" />
                </p:selectOneRadio>
                <p:outputLabel value="Email:  " class="label-app" />
                <p:inputText id="txtemail" value="#{usersBean.user.email}"  class="texto"></p:inputText>
                   <p:commandButton value="Registrar" actionListener="#{usersBean.registrar(login.user.registro)}" class="boton-ingresar" update="txtusuario,password,txtdni,txtnombreu,cmdnivel,txtemail"/>
          
             </h:panelGrid>
                
            </p:dialog>
            </div>
                <div class="dialog-gestion-alumnos">
                <p:dialog header="Getionar Alumno" widgetVar="alumno"  showEffect="clip" hideEffect="clip"  rendered="true" height="auto" width="100%" modal="true" draggable="false" resizable="false"  position="absolute" >
                    <h:panelGrid columns="1" class="listausers">
                        <p:dataTable id="listaalumnos" var="alumnos" value="#{usersBean.user.listaalumnos}" filteredValue="#{usersBean.user.alumnofiltro}" >
                            <p:column headerText="Usuario" filterBy="#{alumnos.usuario}" filterFunction="#{alumnos.filterByName}" filterMatchMode="contains">
                                <h:outputText value="#{alumnos.usuario} " rendered="#{alumnos.flag3}" />
                                <h:inputText value="#{alumnos.usuario}" rendered="#{ not alumnos.flag3}" class="texto2"/>
                            </p:column>
                            <p:column headerText="Nombre" filterBy="#{alumnos.nombre}" filterFunction="#{alumnos.filterByName}" filterMatchMode="contains" >
                                <h:outputText value="#{alumnos.nombre}" rendered="#{alumnos.flag3}" />
                                <h:inputText value="#{alumnos.nombre}" rendered="#{ not alumnos.flag3}" class="texto2"/>
                            </p:column>
                            <p:column headerText="DNI" filterBy="#{alumnos.dni}"  filterMatchMode="contains" >
                                <h:outputText value="#{alumnos.dni}" rendered="#{alumnos.flag3}" />
                                <h:inputText value="#{alumnos.dni}" rendered="#{ not alumnos.flag3}" class="texto2" />
                            </p:column>
                            <p:column headerText="Email" filterBy="#{alumnos.email}" filterFunction="#{alumnos.filterByName}" filterMatchMode="contains" >
                                <h:outputText value="#{alumnos.email}" rendered="#{alumnos.flag3}" />
                                <h:inputText value="#{alumnos.email}" rendered="#{ not alumnos.flag3}" class="texto2" />
                            </p:column>
                            <p:column headerText="Sexo" >
                                <p:selectOneRadio id="sexo" value="#{alumnos.sexo}" disabled="#{alumnos.flag3}" >
                                    <f:selectItem itemLabel="M" itemValue="1" />
                                    <f:selectItem itemLabel="F" itemValue="2" />
                                </p:selectOneRadio>
                            </p:column>
                            <p:column headerText="Accion">
                                <p:commandButton icon="ui-icon-close" actionListener="#{usersBean.user.cancelar(alumnos)}"  rendered="#{ not alumnos.flag3}" update="listaalumnos" class="btn-dialog" />
                                <p:commandButton icon="ui-icon-check" actionListener="#{usersBean.user.actualizar(alumnos,login.user.registro)}" rendered="#{ not alumnos.flag3}" update="listaalumnos" class="btn-dialog"/>
                                <p:commandButton icon="ui-icon-pencil" actionListener="#{usersBean.user.editar(alumnos)}"  rendered="#{alumnos.flag3}" update="listaalumnos" class="btn-dialog"/>
                            </p:column>
                            <p:column headerText="Contactar">
                                <p:commandButton icon="ui-icon-mail-closed" class="btn-dialog" />
                            </p:column>

                        </p:dataTable>
                    </h:panelGrid>
                </p:dialog>

                <p:dialog header="Getionar Docente" widgetVar="docente" showEffect="clip" hideEffect="clip"  rendered="true" height="auto" width="100%" modal="true" draggable="false" resizable="false" position="absoluter" >
                    <h:panelGrid columns="1" class="listausers">
                        <p:dataTable id="listadocente" var="profesores" value="#{usersBean.user.listaprofesor}" filteredValue="#{usersBean.user.profesorfiltro}" >
                            <p:column headerText="Usuario" filterBy="#{profesores.usuario}" filterFunction="#{profesores.filterByName}" filterMatchMode="contains">
                                <h:outputText value="#{profesores.usuario} " rendered="#{profesores.flag3}" />
                                <h:inputText value="#{profesores.usuario}" rendered="#{ not profesores.flag3}" class="texto2" />
                            </p:column>
                            <p:column headerText="Nombre" filterBy="#{profesores.nombre}" filterFunction="#{profesores.filterByName}" filterMatchMode="contains" >
                                <h:outputText value="#{profesores.nombre}" rendered="#{profesores.flag3}" />
                                <h:inputText value="#{profesores.nombre}" rendered="#{ not profesores.flag3}" class="texto2"/>
                            </p:column>
                            <p:column headerText="DNI" filterBy="#{profesores.dni}" filterMatchMode="contains">
                                <h:outputText value="#{profesores.dni}" rendered="#{profesores.flag3}" />
                                <h:inputText value="#{profesores.dni}" rendered="#{ not profesores.flag3}" class="texto2"/>
                            </p:column>
                            <p:column headerText="Email" filterBy="#{profesores.email}"  filterFunction="#{profesores.filterByName}" filterMatchMode="contains">
                                <h:outputText value="#{profesores.email}" rendered="#{profesores.flag3}" />
                                <h:inputText value="#{profesores.email}" rendered="#{ not profesores.flag3}" class="texto2" />
                            </p:column>
                            <p:column headerText="Sexo" >
                                <p:selectOneRadio id="sexo" value="#{profesores.sexo}"  disabled="#{profesores.flag3}" >
                                    <f:selectItem itemLabel="M" itemValue="1" />
                                    <f:selectItem itemLabel="F" itemValue="2" />
                                </p:selectOneRadio>
                            </p:column>
                            <p:column headerText="Accion">
                                <p:commandButton icon="ui-icon-close" actionListener="#{usersBean.user.cancelar(profesores)}"  rendered="#{ not profesores.flag3}" update="listadocente" class="btn-dialog" />
                                <p:commandButton icon="ui-icon-check" actionListener="#{usersBean.user.actualizar(profesores,login.user.registro)}" rendered="#{ not profesores.flag3}" update="listadocente" class="btn-dialog"/>
                                <p:commandButton icon="ui-icon-pencil" actionListener="#{usersBean.user.editar(profesores)}"  rendered="#{profesores.flag3}" update="listadocente" class="btn-dialog"/>
                            </p:column>

                        </p:dataTable>
                    </h:panelGrid>
                </p:dialog>
    </div>
            
        </h:form>
            </f:view>
    </h:body>
</html>
